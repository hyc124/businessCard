(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/card/card"],{"2b60":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a")),a=n("d097");function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,o,a,i,r){try{var u=t[i](r),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(o,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function u(t){r(i,o,a,u,s,"next",t)}function s(t){r(i,o,a,u,s,"throw",t)}u(void 0)}))}}var s=function(){n.e("components/card/card").then(function(){return resolve(n("e55a"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/friend/friend").then(function(){return resolve(n("bf9d"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/choice/choice").then(function(){return resolve(n("9274"))}.bind(null,n)).catch(n.oe)},f=null,l={data:function(){return{role:"self",shareShow:!1,palette:"",imagePath:"",formData:{},imageList:[],Collection:"",modal:{onOff:!1},remind:!1,list:[],show:{onOff:!1},seeImg:!0,num:1}},components:{card:s,friend:c,choice:d},computed:{cardInfo:function(){return this.$store.state.cardInfo},customerId:function(){return this.$store.state.customerId},getInfo:function(){return this.$store.state.info}},methods:{onImgSee:function(){this.seeImg=!1},onChoice:function(t){2==t.num&&this.getVcardCustomer(t.data),this.show.onOff=!1},onGoFroend:function(){this.$store.commit("SetCustomerId",""),t.switchTab({url:"/pages/friend/friend"})},onGocard:function(e){console.log(2123132),1==e?(this.$store.commit("SetCustomerId",""),t.switchTab({url:"/pages/cardholder/cardholder"})):(0,a.OCRCard)("",1,1,this.callBack,1)},onRetur:function(){if(console.log(465465465465),this.formData.is_exists)this.$store.commit("SetCustomerId",this.num),t.switchTab({url:"/pages/cardholder/cardholder"});else{var e=this.formData.default_group_id;0==e||""==e?this.show.onOff=!0:this.getVcardCustomer()}},callBack:function(t){this.remind=t},handleMycenter:function(){this.$store.commit("SetCustomerId",""),t.navigateTo({url:"/pages/myCenter/index/index"})},handleInfoClick:function(e){var n=this;"mobile"==e&&""!=this.customerId?n.formData[e]&&t.makePhoneCall({phoneNumber:n.formData[e]}):"self"==n.role&&t.setClipboardData({data:n.formData[e],success:function(){t.showToast({title:"复制成功",duration:2e3})}})},showMsg:function(t,e){f.$refs.uTips.show({title:e,type:t,duration:"2300"})},handleTakePhoto:function(){(0,a.OCRCard)("",1,1,this.callBack,1)},handlePreviewImg:function(e){this.seeImg=!1,t.previewImage({urls:this.imageList,current:e,indicator:"number"})},toCode:function(){t.navigateTo({url:"/pages/code/code"})},editCard:function(){""==this.customerId?t.navigateTo({url:"/pages/myCenter/edit/edit?type=4&state=0"}):t.navigateTo({url:"/pages/myCenter/edit/edit?type=4&state=1&id=".concat(this.customerId)})},toPoster:function(){t.navigateTo({url:"/pages/poster/poster"})},onShareAppMessage:function(t){var e=this.formData.id,n=this.formData.username,o=this.formData.position,a=this.formData.company_name,i="你好，我是".concat(a).concat(o,"的").concat(n,",这是我的电子名片，望惠存。谢谢！"),r=this.formData.posters_share?this.formData.posters_share:"";return{title:i,path:"/pages/info/info?scene="+e,imageUrl:r}},getVcardCustomer:function(t){var e=this;return u(o.default.mark((function n(){var a,i,r,u;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a="",i=0,void 0!=t?(a=t.group_id,i=t.is_default_group):a=e.formData.default_group_id,n.next=4,e.$u.api.vcardCustomer({id:e.formData.id,group_id:a,is_default_group:i});case 4:r=n.sent,r.data,u=r.code,1==u&&(e.num="",e.modal.onOff=!0,e.formData.is_exists=!0);case 8:case"end":return n.stop()}}),n)})))()},getUserInfo:function(t){var e=this;return u(o.default.mark((function n(){var a,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$u.api.cardInfo({id:t});case 2:a=n.sent,i=a.data,e.formData=i,e.imageList=e.formData.altas?e.formData.altas.map((function(t){return t.altas_path})):[];case 6:case"end":return n.stop()}}),n)})))()},getFriends:function(){var t=this;return u(o.default.mark((function e(){var n,a,i;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$u.api.friends({page:1,limit:3});case 2:n=e.sent,a=n.data,i=n.code,1==i&&(t.list=a.list);case 6:case"end":return e.stop()}}),e)})))()}},onShow:function(){console.log(this.seeImg,"测试第五步"),this.seeImg?(this.num=1,console.log(this.customerId,"测试第六步"),""!=this.customerId?this.getUserInfo(this.customerId):(this.formData=this.cardInfo,this.imageList=this.cardInfo.altas?this.cardInfo.altas.map((function(t){return t.altas_path})):[]),this.getFriends()):this.seeImg=!0}};e.default=l}).call(this,n("543d")["default"])},6936:function(t,e,n){"use strict";(function(t){n("4ee8");o(n("66fd"));var e=o(n("ea39"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ac55:function(t,e,n){},d4ad:function(t,e,n){"use strict";var o=n("ac55"),a=n.n(o);a.a},d893:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"4585"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"9a4c"))},uTopTips:function(){return n.e("uview-ui/components/u-top-tips/u-top-tips").then(n.bind(null,"95f1"))},card:function(){return n.e("components/card/card").then(n.bind(null,"e55a"))},friend:function(){return n.e("components/friend/friend").then(n.bind(null,"bf9d"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"47a4"))},uLoading:function(){return n.e("uview-ui/components/u-loading/u-loading").then(n.bind(null,"0da7"))},uDivider:function(){return n.e("uview-ui/components/u-divider/u-divider").then(n.bind(null,"ed53"))},choice:function(){return n.e("components/choice/choice").then(n.bind(null,"9274"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"2200"))},uModal:function(){return n.e("uview-ui/components/u-modal/u-modal").then(n.bind(null,"c26b"))}},a=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.shareShow=!1},t.e1=function(e){t.modal.onOff=!1},t.e2=function(e){t.remind=!1})},i=[]},ea39:function(t,e,n){"use strict";n.r(e);var o=n("d893"),a=n("fb56");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("d4ad");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"4034b400",null,!1,o["a"],r);e["default"]=s.exports},fb56:function(t,e,n){"use strict";n.r(e);var o=n("2b60"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a}},[["6936","common/runtime","common/vendor"]]]);